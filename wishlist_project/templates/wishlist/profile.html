{% extends "base.html" %}
{% block title %}
  Страница пользователя {{ profile.username }}
{% endblock %}

{% block content %}
<div class="container py-5">
  <h1 class="mb-4 text-center">Страница пользователя {{ profile.username }}</h1>
  <div class="dark-theme">
  <ul class="list-group list-group-horizontal justify-content-center mb-3">
    <li class="list-group-item text-muted">
      Имя пользователя: {% if profile.get_full_name %}{{ profile.get_full_name }}{% else %}не указано{% endif %}
    </li>
    <li class="list-group-item text-muted">
      Регистрация: {{ profile.date_joined|date:"d.m.Y H:i" }}
    </li>
    <li class="list-group-item text-muted">
      Роль: {% if profile.is_staff %}Админ{% else %}Пользователь{% endif %}
    </li>
  </ul>
  </div>
  {% if user.is_authenticated and request.user == profile %}
  <div class="text-center mb-5">
    <a class="btn btn-outline-secondary btn-sm me-2" href="{% url 'wishlists:edit_profile' %}">Редактировать профиль</a>
    <a class="btn btn-outline-secondary btn-sm" href="{% url 'password_change' %}">Изменить пароль</a>
  </div>
  {% endif %}
  <h3 class="mb-4 text-center">Wishlists пользователя</h3>
  {% if wishlists %}
  <div class="row row-cols-1 row-cols-md-2 row-cols-lg-3 g-4">
    {% for wishlist in wishlists %}
    <div class="col">
      <div class="card h-100 shadow-sm">
        <div class="card-body d-flex flex-column">
          <h5 class="card-title">{{ wishlist.title }}</h5>
          <p class="card-text">{{ wishlist.description|truncatechars:100 }}</p>
          <p class="mt-auto">
            {% if wishlist.is_public %}
              <span class="badge bg-success">Публичный</span>
            {% else %}
              <span class="badge bg-secondary">Приватный</span>
            {% endif %}
          </p>
          <a href="{% url 'wishlists:wishlist_detail' wishlist.id %}" class="btn btn-outline-primary mt-2">Открыть список</a>
        </div>
        <div class="card-footer text-muted">
          Создан: {{ wishlist.created_at|date:"d.m.Y H:i" }}
        </div>
      </div>
    </div>
    {% endfor %}
  </div>
  {% else %}
    <p class="text-center">У пользователя пока нет списков желаний.</p>
  {% endif %}

</div>
{% endblock %}
